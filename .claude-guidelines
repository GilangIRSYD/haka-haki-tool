# Claude Code Project Guidelines

## ğŸ“Œ IMPORTANT - READ THIS FIRST

This file contains **MUST FOLLOW** rules for Claude Code (AI assistant) when working on this project.

**Claude Code MUST:**
1. Read and follow ALL rules in this file before making any changes
2. Use the folder structure defined below
3. Follow the naming conventions exactly
4. Create barrel exports (index.ts) for every new folder
5. Use barrel exports for imports

---

## ğŸ—ï¸ PROJECT STRUCTURE (STRICT)

This project uses **Type-Based (Atomic) Component Organization**.

```
idx-web/
â”œâ”€â”€ app/                    # Next.js App Router
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/            # Layout components ONLY
â”‚   â”œâ”€â”€ ui/                # UI components ONLY
â”‚   â””â”€â”€ icons/             # Icons ONLY
â”œâ”€â”€ lib/                   # Utilities, helpers, formatters
â”œâ”€â”€ hooks/                 # Custom React hooks
â”œâ”€â”€ services/              # API calls, external services
â”œâ”€â”€ config/                # Configuration files
â”œâ”€â”€ types/                 # TypeScript types
â””â”€â”€ styles/                # Global styles
```

---

## ğŸ“‚ FOLDER RULES (DECISION TREE)

When creating ANY file, Claude Code MUST follow this decision tree:

```
START: What are you creating?
â”‚
â”œâ”€â†’ Is it a React Component (returns JSX)?
â”‚   â”‚
â”‚   â”œâ”€â†’ Is it layout-related? (Navbar, Footer, Sidebar, Header)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â†’ YES â†’ Create in: components/layout/[ComponentName].tsx
â”‚   â”‚
â”‚   â”œâ”€â†’ Is it an icon/graphic? (SVG component)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â†’ YES â†’ Create in: components/icons/[IconName].tsx
â”‚   â”‚
â”‚   â””â”€â†’ Is it a reusable UI element?
â”‚       â”‚
â”‚       â””â”€â†’ YES â†’ Create in: components/ui/[ComponentName].tsx
â”‚
â”œâ”€â†’ Is it a React Hook? (uses useState, useEffect, etc.)
â”‚   â”‚
â”‚   â””â”€â†’ YES â†’ Create in: hooks/use[HookName].ts
â”‚
â”œâ”€â†’ Is it an API call or external service?
â”‚   â”‚
â”‚   â””â”€â†’ YES â†’ Create in: services/[ServiceName].ts
â”‚
â””â”€â†’ Is it a utility/helper function?
    â”‚
    â””â”€â†’ YES â†’ Create in: lib/[FileName].ts
```

### Examples

âœ… **CORRECT:**
- User profile card â†’ `components/ui/UserProfileCard.tsx`
- Navigation bar â†’ `components/layout/Navbar.tsx`
- Logo icon â†’ `components/icons/Logo.tsx`
- Date formatter â†’ `lib/formatDate.ts`
- Auth hook â†’ `hooks/useAuth.ts`
- API client â†’ `services/api.ts`

âŒ **WRONG:**
- User profile card â†’ `components/UserProfileCard.tsx` (missing folder!)
- Navigation bar â†’ `components/ui/Navbar.tsx` (wrong folder!)
- Date formatter â†’ `components/formatDate.tsx` (wrong folder!)
- Auth hook â†’ `lib/useAuth.ts` (wrong folder!)

---

## ğŸ“ FILE NAMING CONVENTIONS

### Components
- **Format:** PascalCase
- **Extension:** `.tsx`
- **Rule:** File name MUST match component name exactly
- **Examples:** `Navbar.tsx`, `ThemeSwitch.tsx`, `UserProfileCard.tsx`

### Utilities, Hooks, Services
- **Format:** camelCase
- **Extension:** `.ts` (no JSX)
- **Examples:** `utils.ts`, `useAuth.ts`, `api.ts`, `validators.ts`

---

## ğŸ“¦ BARREL EXPORTS (REQUIRED)

**EVERY folder MUST have `index.ts` file for barrel exports.**

### Creating Barrel Export

When Claude Code creates a new file in a folder, it MUST also update the `index.ts`:

```typescript
// components/ui/index.ts
export * from './theme-switch';
export * from './counter';
export * from './UserProfileCard'; // â† Add this for new component

// lib/index.ts
export * from './utils';
export * from './formatDate'; // â† Add this for new utility
```

### Import Convention

**ALWAYS use barrel exports for imports:**

```typescript
// âœ… CORRECT
import { Navbar } from "@/components/layout";
import { ThemeSwitch } from "@/components/ui";
import { formatDate } from "@/lib/utils";
import { useAuth } from "@/hooks";

// âŒ WRONG - Don't import from specific file
import { Navbar } from "@/components/layout/navbar";
import { ThemeSwitch } from "@/components/ui/theme-switch";
```

---

## ğŸ¯ COMPONENT CREATION RULES

When creating a component, Claude Code MUST:

1. **Place in correct folder** (use decision tree above)
2. **Export props interface:**
   ```typescript
   export interface ComponentNameProps {
     // Define all props
   }
   ```

3. **Use FC type:**
   ```typescript
   export const ComponentName: FC<ComponentNameProps> = ({ ... }) => {
   ```

4. **Add "use client" directive** (if needed):
   ```typescript
   "use client";

   // Add at top if using:
   // - React hooks (useState, useEffect, etc.)
   // - Event handlers (onClick, onChange, etc.)
   // - Browser APIs
   ```

5. **Create/update barrel export** in folder's `index.ts`

6. **Use barrel export** when importing elsewhere

### Example: Creating a Button Component

```typescript
// components/ui/Button.tsx
"use client";

import { FC } from "react";

export interface ButtonProps {
  label: string;
  onClick?: () => void;
  variant?: "primary" | "secondary";
}

export const Button: FC<ButtonProps> = ({ label, onClick, variant = "primary" }) => {
  return (
    <button
      onClick={onClick}
      className={`btn btn-${variant}`}
    >
      {label}
    </button>
  );
};

// Then update components/ui/index.ts:
// export * from './Button';
```

---

## ğŸ”§ UTILITY/HOOK/SERVICE CREATION RULES

### Utilities (lib/)
- **Pure functions only** - NO React dependencies
- **NO JSX** - use `.ts` extension
- **Export functions** that can be used anywhere

```typescript
// lib/formatDate.ts
export const formatDate = (date: Date): string => {
  return date.toLocaleDateString('id-ID');
};

// Then update lib/index.ts:
// export * from './formatDate';
```

### Hooks (hooks/)
- **MUST use React hooks** (useState, useEffect, etc.)
- **Naming convention:** `use[HookName]`
- **Export custom hook** that encapsulates logic

```typescript
// hooks/useLocalStorage.ts
import { useState } from "react";

export const useLocalStorage = <T>(key: string, initialValue: T) => {
  // Hook implementation
};

// Then update hooks/index.ts:
// export * from './useLocalStorage';
```

### Services (services/)
- **API calls** - fetch, axios, etc.
- **External service integrations**
- **Return data, NOT JSX**

```typescript
// services/userApi.ts
export const fetchUser = async (id: string) => {
  const response = await fetch(`/api/users/${id}`);
  return response.json();
};

// Then update services/index.ts:
// export * from './userApi';
```

---

## ğŸ“‹ IMPORT ORDER CONVENTION

When writing imports, use this order:

```typescript
// 1. React & Next.js
import { useState } from "react";
import Link from "next/link";

// 2. Third-party libraries
import { Button } from "@heroui/button";
import clsx from "clsx";

// 3. Project imports (use barrel exports!)
import { Navbar } from "@/components/layout";
import { title } from "@/lib/utils";
```

---

## âœ… CHECKLIST BEFORE COMPLETING TASK

Before saying a task is complete, Claude Code MUST verify:

- [ ] File created in correct folder (followed decision tree)
- [ ] File name follows convention (PascalCase for components, camelCase for others)
- [ ] Component has props interface exported
- [ ] Component uses FC type
- [ ] "use client" added if needed
- [ ] Folder's `index.ts` updated with barrel export
- [ ] Imports use barrel exports (not specific file paths)
- [ ] Build passes: `npm run build`

---

## ğŸš« COMMON MISTAKES TO AVOID

âŒ **DON'T:**
- Create component without folder structure
- Put utilities in `components/`
- Put hooks in `lib/`
- Put API calls in `lib/`
- Import from specific file instead of barrel export
- Forget to update barrel export (index.ts)
- Use wrong file naming (snake_case, inconsistent)

âœ… **DO:**
- Follow the decision tree for folder placement
- Create barrel exports for every folder
- Use barrel exports for imports
- Follow naming conventions strictly
- Run build before completing task

---

## ğŸ¨ PROJECT-SPECIFIC INFO

- **Framework:** Next.js 15 with App Router
- **UI Library:** HeroUI v2
- **Styling:** Tailwind CSS
- **TypeScript:** Strict mode enabled
- **Theme:** Dark/light mode support

---

## ğŸ’¡ TEMPLATES

### New Component Template
```typescript
"use client";

import { FC } from "react";

export interface ComponentNameProps {
  // Define props here
}

export const ComponentName: FC<ComponentNameProps> = ({ ... }) => {
  // Hooks here

  // Handlers here

  // Return JSX
  return (
    <div>
      {/* Component JSX */}
    </div>
  );
};
```

### New Utility Template
```typescript
export const functionName = (params: ParamType): ReturnType => {
  // Implementation
  return result;
};
```

### New Hook Template
```typescript
import { useState } from "react";

export const useHookName = <T>(initialValue: T) => {
  const [value, setValue] = useState<T>(initialValue);

  // Hook logic

  return { value, setValue };
};
```

---

## ğŸ“– ADDITIONAL INFORMATION

- This project follows **Type-Based (Atomic)** organization
- Not feature-based - keep components organized by TYPE
- Barrel exports make imports cleaner and more maintainable
- Consistency is key - follow these rules every time

**When unsure:** Use the decision tree above or ask the user for clarification.

---

## ğŸ”— RELATED FILES

- `.cursorrules` - Cursor AI editor conventions (similar content)
- `README.md` - Human-readable documentation
- `tsconfig.json` - TypeScript configuration with path aliases (@/*)

---

**Last Updated:** 2026-01-02
**Project:** idx-web (Next.js + HeroUI)
**Convention:** Type-Based Component Organization
